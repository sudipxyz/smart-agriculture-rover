<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgroRover | Smart Farming Starts Here</title>
  <style>
    body {
      background-color: #0e0e0e;
      color: #f0f0f0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
    }
    h1, h2, h3 {
      color: #4fc3f7;
      border-bottom: 2px solid #444;
      padding-bottom: 4px;
    }
    ul, ol {
      background-color: #1a1a1a;
      padding: 15px;
      border-radius: 10px;
    }
    li {
      margin-bottom: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #444;
    }
    th {
      background-color: #222;
    }
    input, textarea, button {
      font-size: 16px;
      margin: 6px 0;
      padding: 8px;
      border-radius: 6px;
      border: none;
    }
    input, textarea {
      width: 100%;
      background: #1c1c1c;
      color: #eee;
    }
    button {
      background-color: #4fc3f7;
      color: #000;
      cursor: pointer;
    }
    #login-page, #main-content {
      max-width: 900px;
      margin: 0 auto;
      background: #161616;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
    }
    .code-container {
      position: relative;
      margin-bottom: 20px;
    }
    pre code {
      display: block;
      overflow-x: auto;
      white-space: pre;
      background: #1e1e1e;
      color: #ddd;
      padding: 10px;
      border-radius: 8px;
      font-family: Consolas, monospace;
    }
    .copy-btn {
      position: absolute;
      right: 10px;
      top: 10px;
      background: #444;
      color: white;
      border: none;
      padding: 4px 8px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 12px;
      z-index: 1;
    }
    .ip-inputs label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
  </style>
</head>
<body>
<!-- Main content continues below -->

<div id="login-page">
  <h2>üîê Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="handleLogin()">Login</button>
  <p id="login-msg"></p>

  <h3>üìù Submit Feedback</h3>
  <textarea id="feedback" placeholder="Write your feedback..."></textarea><br>
  <button onclick="saveFeedback()">Submit Feedback</button>
</div>

<div id="main-content" style="display: none;">
  <h1>üöú AgroRover</h1>
  <p><em>Smart Farming Starts Here</em></p>

  <h2>üìò Project Introduction</h2>
  <p>This project integrates a Smart Rover and an IoT-based Weather & Irrigation System. The rover uses ESP32 with obstacle avoidance, GPS tracking, SLAM path visualization, and real-time MPU6050 graphing. The weather system, based on ESP8266, monitors temperature, humidity, air pressure, rainfall, and soil moisture, and controls a 12V pump wirelessly using another ESP8266 as a relay controller.</p>

  <h2>üî© Component List</h2>
  <ul>
    <li>ESP32 (for Rover)</li>
    <li>ESP8266 x2 (for Weather & Pump)</li>
    <li>2 Gear Motors</li>
    <li>L298N Motor Driver</li>
    <li>MPU6050 Accelerometer/Gyroscope</li>
    <li>Ultrasonic Sensor</li>
    <li>IR Sensor</li>
    <li>GPS NEO-7M Module</li>
    <li>DHT11 Temperature & Humidity Sensor</li>
    <li>BMP180 Pressure Sensor</li>
    <li>Soil Moisture Sensor</li>
    <li>Rain Sensor</li>
    <li>Servo Motor (for soil sensor insertion)</li>
    <li>Relay Module + 12V Water Pump</li>
  </ul>

<h2>üìå Pin Diagrams</h2>
<ul>
  <li><strong>ESP32 Rover:</strong>
    <ul>
      <li>Motors ‚Üí L298N (IN1-IN4 connected to GPIO 14, 27, 26, 25)</li>
      <li>Ultrasonic Sensor ‚Üí Trig: GPIO 18, Echo: GPIO 19</li>
      <li>IR Sensor ‚Üí GPIO 33</li>
      <li>MPU6050 (I2C) ‚Üí SDA: GPIO 21, SCL: GPIO 22</li>
      <li>GPS NEO-7M ‚Üí RX: GPIO 16, TX: GPIO 17 (via Serial2)</li>
    </ul>
  </li>
  <li><strong>ESP8266 #1 (Weather & Soil):</strong>
    <ul>
      <li>DHT11 ‚Üí D2</li>
      <li>BMP180 (I2C) ‚Üí SDA: D3, SCL: D4</li>
      <li>Soil Moisture Sensor ‚Üí A0</li>
      <li>Rain Sensor ‚Üí D6</li>
      <li>Servo Motor ‚Üí D5</li>
    </ul>
  </li>
  <li><strong>ESP8266 #2 (Pump Control):</strong>
    <ul>
      <li>Relay Module IN ‚Üí D1</li>
    </ul>
  </li>
</ul>

$1
  <div class="ip-inputs">
    <label for="esp32-ip">ESP32 Rover IP:</label>
    <input id="esp32-ip" type="text" placeholder="e.g., 192.168.1.101">
    <button onclick="goToESP32()">Open Rover Dashboard</button>

    <label for="esp8266-ip">ESP8266 Weather IP:</label>
    <input id="esp8266-ip" type="text" placeholder="e.g., 192.168.1.102">
    <button onclick="goToESP8266()">Open Weather Dashboard</button>
  </div>

  <h2>üöÄ How to Upload the Code</h2>
  <ol>
    <li>Open the Arduino IDE and select the appropriate board from <strong>Tools &gt; Board</strong> (ESP32 Dev Module or NodeMCU 1.0 for ESP8266).</li>
    <li>Install the necessary libraries from the Library Manager (e.g., <code>Adafruit_MPU6050</code>, <code>DHT sensor library</code>, <code>Adafruit BMP085</code>, <code>TinyGPSPlus</code>, etc.).</li>
    <li>Copy the respective code from this site using the <strong>Copy</strong> button above each block.</li>
    <li>Paste the code into Arduino IDE and connect your board via USB.</li>
    <li>Select the correct <strong>Port</strong> from <strong>Tools &gt; Port</strong> and click the <strong>Upload</strong> button.</li>
  </ol>

  <h2>üåê How to Access Dashboards</h2>
  <ol>
    <li>Ensure all 3 boards are powered and connected to WiFi SSID <strong>Sudip</strong> with password <strong>87654321</strong>.</li>
    <li>Open the <strong>Serial Monitor</strong> at <strong>115200 baud</strong> right after uploading the code.</li>
    <li>Note the local IP address shown for each ESP module:
      <ul>
        <li>ESP32 ‚Üí Rover Dashboard (Control Node)</li>
        <li>ESP8266 #1 ‚Üí Weather & Soil Monitoring (Sensor Node)</li>
        <li>ESP8266 #2 ‚Üí Water Pump Control (Relay Node)</li>
      </ul>
    </li>
    <li>Enter the IP addresses in the dashboard section on this webpage to open each control panel.</li>
  </ol>
<h2>üìü ESP32 Rover Full Code</h2>
<div class="code-container">
  <button class="copy-btn" onclick="copyCode(this)">Copy</button>
  <pre><code id="esp32-code">// Full ESP32 Rover Code
#include <WiFi.h>
#include <WebServer.h>
#include <Wire.h>
#include <Adafruit_MPU6050.h>
#include <Adafruit_Sensor.h>
#include <TinyGPSPlus.h>
#include <HardwareSerial.h>

#define IN1 14
#define IN2 27
#define IN3 26
#define IN4 25
#define TRIG 18
#define ECHO 19
#define IRSENSOR 33

Adafruit_MPU6050 mpu;
TinyGPSPlus gps;
HardwareSerial ss(1);
WebServer server(80);

void setup() {
  Serial.begin(115200);
  ss.begin(9600, SERIAL_8N1, 16, 17);
  WiFi.begin("Sudip", "87654321");
  while (WiFi.status() != WL_CONNECTED) delay(500);

  pinMode(IN1, OUTPUT); pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT); pinMode(IN4, OUTPUT);
  pinMode(TRIG, OUTPUT); pinMode(ECHO, INPUT);
  pinMode(IRSENSOR, INPUT);

  mpu.begin();
  server.begin();
}

void loop() {
  while (ss.available() > 0) gps.encode(ss.read());
  server.handleClient();
  // Add sensor reading, motor control, and dashboard serving here
}</code></pre>
</div>

<h2>üå§Ô∏è ESP8266 #1 Sensor Node Code</h2>
<div class="code-container">
  <button class="copy-btn" onclick="copyCode(this)">Copy</button>
  <pre><code id="esp8266-1-code">// Full ESP8266 #1 Sensor Node Code
#include <ESP8266WiFi.h>
#include <ESP8266WebServer.h>
#include <DHT.h>
#include <Adafruit_BMP085.h>
#include <Servo.h>

#define DHTPIN D2
#define RAINPIN D6
#define SOILPIN A0
#define SERVO D5

DHT dht(DHTPIN, DHT11);
Adafruit_BMP085 bmp;
Servo soilServo;
ESP8266WebServer server(80);

void setup() {
  Serial.begin(115200);
  WiFi.begin("Sudip", "87654321");
  while (WiFi.status() != WL_CONNECTED) delay(500);

  dht.begin(); bmp.begin();
  soilServo.attach(SERVO);

  server.on("/data", []() {
    float t = dht.readTemperature();
    float h = dht.readHumidity();
    float p = bmp.readPressure()/100.0;
    int soil = analogRead(SOILPIN);
    int rain = digitalRead(RAINPIN);
    server.send(200, "application/json",
      String("{\"temp\":") + t + ",\"hum\":" + h + ",\"pres\":" + p + ",\"soil\":" + soil + ",\"rain\":" + rain + "}");
  });
  server.begin();
}

void loop() {
  server.handleClient();
}</code></pre>
</div>

<h2>üíß ESP8266 #2 Pump Controller Code</h2>
<div class="code-container">
  <button class="copy-btn" onclick="copyCode(this)">Copy</button>
  <pre><code id="esp8266-2-code">// Full ESP8266 #2 Pump Controller Code
#include <ESP8266WiFi.h>
#include <ESP8266WebServer.h>

#define PUMP D1
ESP8266WebServer server(80);

void setup() {
  Serial.begin(115200);
  WiFi.begin("Sudip", "87654321");
  while (WiFi.status() != WL_CONNECTED) delay(500);
  pinMode(PUMP, OUTPUT);

  server.on("/on", []() {
    digitalWrite(PUMP, HIGH);
    server.send(200, "text/plain", "Pump ON");
  });

  server.on("/off", []() {
    digitalWrite(PUMP, LOW);
    server.send(200, "text/plain", "Pump OFF");
  });

  server.begin();
}

void loop() {
  server.handleClient();
}</code></pre>
</div>
</div>

<script>
function saveFeedback() {
  const fb = document.getElementById('feedback').value;
  if (fb.trim()) {
    const allFeedback = JSON.parse(localStorage.getItem('feedbacks') || '[]');
    allFeedback.push(fb);
    localStorage.setItem('feedbacks', JSON.stringify(allFeedback));
    alert("‚úÖ Feedback saved locally!");
    document.getElementById('feedback').value = "";
  }
}

function handleLogin() {
  const u = document.getElementById('username').value;
  const p = document.getElementById('password').value;
  if (u === "Rover" && p === "87654321") {
    document.getElementById('login-page').style.display = 'none';
    document.getElementById('main-content').style.display = 'block';
  } else {
    document.getElementById('login-msg').innerText = "‚ùå Incorrect username or password.";
  }
}

function goToESP32() {
  const ip = document.getElementById('esp32-ip').value;
  if (ip) window.open(`http://${ip}`, '_blank');
}

function goToESP8266() {
  const ip = document.getElementById('esp8266-ip').value;
  if (ip) window.open(`http://${ip}`, '_blank');
}

window.onload = function() {
  document.getElementById('login-page').style.display = 'block';
  document.getElementById('main-content').style.display = 'none';
};
function copyCode(btn) {
  const code = btn.nextElementSibling.innerText;
  navigator.clipboard.writeText(code).then(() => {
    btn.innerText = 'Copied!';
    setTimeout(() => btn.innerText = 'Copy', 2000);
  });
}
</script>

